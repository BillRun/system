[yaf]
;APPLICATION_PATH is the constant defined in index.php
application.directory=APPLICATION_PATH "/application"
application.library=APPLICATION_PATH "/library"

;product section inherit from yaf section
[product:yaf]
environment="dev"
db.host=mongodb34_ilds
db.port=
db.user=
db.password=
db.name=ilds
db.collections.lines="lines"
db.collections.billrun="billrun"
db.collections.log="log"
db.collections.events="events"
db.collections.rates="rates"
db.collections.counters="counters"
db.timeout=-1

;cli available actions
cli.actions.receive='controllers/Action/Receive.php'
cli.actions.process='controllers/Action/Process.php'
cli.actions.calculate='controllers/Action/Calculate.php'
cli.actions.aggregate='controllers/Action/Aggregate.php'
cli.actions.generate='controllers/Action/Generate.php'
cli.actions.respond='controllers/Action/Respond.php'
cli.actions.alert='controllers/Action/Alert.php'
cli.actions.help='controllers/Action/Help.php'

;api available actions
api.actions.refund='controllers/Action/Refund.php'
api.actions.balance='controllers/Action/Balance.php'

;api output method
api.outputMethod[]=Zend_Json
api.outputMethod[]=encode
api.outputMethod.balance=print_r

;log
log.timestampFormat="Y-m-d H:i:s"
log.debug.writerName="Stream"
log.debug.writerParams.stream=APPLICATION_PATH "/logs/debug.log"
log.debug.formatterName="Simple"
log.debug.formatterParams.format="%timestamp% %priorityName%: %message%" PHP_EOL
log.debug.filterName="Priority"
;0-min, 7-max (see Zend_Log constants)
log.debug.filterParams.priority=7

;log.mongo.writerName='MongoDb'
;log.mongo.writerParams.server = "mongodb://127.0.0.1:27017"
;log.mongo.writerParams.options.username=
;log.mongo.writerParams.options.password=
;log.mongo.writerParams.database = "billing"
;log.mongo.writerParams.collection = "issuesLog"
;log.mongo.filterName="Priority"
;log.mongo.filterParams.priority=5

;log.email.writerName='Mail'
;log.email.writerParams.subject = "issues with the ILDS system"
;log.email.writerParams.from = "no-reply@golantelecom.net.il"
;log.email.writerParams.to[] = "ocohen@golantelecom.co.il"
;log.email.writerParams.to[] = "euzan@golantelecom.co.il"
;log.email.writerParams.to[] = "vbass@golantelecom.co.il"
;log.email.writerParams.to[] = "glouzon@golantelecom.co.il"
;log.email.filterName="Priority"
;log.email.filterParams.priority=4

;log.email.notify[]='root'
;log.alerts.email.notify[]='eran'

;cache
;cache.0="Core"
;cache.1.="Memcached"
;cache.2.cache_id_prefix=Billrun
;cache.2.lifetime=14400
;mailer
mailer.from.addresss='no-reply@golantelecom.net.il'
mailer.from.name='Billrun Mailer'

;billrun
billrun.charging_day=25

provider.rpc.server="gtgt.no-ip.org"

;plugins
plugins[]=nrtrdePlugin
plugins[]=ggsnPlugin
plugins[]=fraudAlertsPlugin
plugins[]=emailAlertsPlugin
plugins[]=depositPlugin
plugins[]=ildsPlugin
plugins[]=nsnPlugin
plugins[]=tap3Plugin
plugins[]=smsPlugin

;chains (chain of responsibility plugin system)
;chains[]=nrtrdePlugin
chains[]=nsnPlugin
chains[]=tap3Plugin
chains[]=ggsnPlugin

;responder
response.export.path=APPLICATION_PATH "/export/"
response.workspace=APPLICATION_PATH "/workspace/"

;;;;;;;;;;;;;;;;;;;;;;;;;;; Plugin settings ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;ILDS
012.receiver.type='relocate'
012.receiver.path='../../encrypted/golan/receiving/012'
012.workspace=APPLICATION_PATH "/workspace/"
012.filename_regex="/^INT_KVZ_GLN_MABAL_\d+_\d+\.DAT$/"
012.sequence_regex.seq="/\w_(\d+)_/"
012.sequence_regex.date="/\d+_(\d{6})\d/"
012.sequence_regex.time="/(\d{4})\.DAT$/"
012.backup_path[]=APPLICATION_PATH "/workspace/backups/ilds/012"

premium.receiver.type='relocate'
premium.receiver.path='/home/ilya/Documents/billrun/premium'
premium.workspace=APPLICATION_PATH "/workspace/"
premium.filename_regex="/^PRM_(BZQ|GDL|BZN|CEL|HMO|PEL|PRT|RML|GOL|ALN|AZI|GLB|EXP|HOC|SEL|HOT)_GOL_CDR_\d+_\d+.dat$/"

premium.backup_path[]=APPLICATION_PATH "/workspace/backups/premium"
premium.receiver.move_received_files=false

013.receiver.type='relocate'
013.receiver.path='../../encrypted/golan/receiving/013'
013.receiver.move_received_files=false
013.filename_regex="/^I\d+\.I\d+$/"
013.workspace=APPLICATION_PATH "/workspace/"
013.sequence_regex.seq="/(\d+)$/"
013.sequence_regex.date="//"
013.sequence_regex.time="//"
013.backup_path[]=APPLICATION_PATH "/workspace/backups/ilds/013"

014.receiver.type='relocate'
014.receiver.path='../../encrypted/golan/receiving/014'
014.filename_regex="/^INT_MBZ_GTC_CDR_\d+_\d+\.DAT$/"
014.workspace=APPLICATION_PATH "/workspace/"
014.sequence_regex.seq="/\w_(\d+)_/"
014.sequence_regex.date="/\d+_(\d{6})\d/"
014.sequence_regex.time="/(\d{6})\.DAT$/"
014.backup_path[]=APPLICATION_PATH "/workspace/backups/ilds/014"

015.receiver.type='relocate'
015.receiver.path='../../encrypted/golan/receiving/015'
015.filename_regex="/^INT_HLT_NTV_CDR_\d+_\d+\.DAT$/"
015.workspace=APPLICATION_PATH "/workspace/"
015.sequence_regex.seq="/\w_(\d+)_/"
015.sequence_regex.date="/\d+_(\d{6})\d/"
015.sequence_regex.time="/(\d{6})\.DAT$/"
015.backup_path[]=APPLICATION_PATH "/workspace/backups/ilds/015"

017.receiver.type='relocate'
017.receiver.path='../../encrypted/golan/receiving/017'
017.receiver.move_received_files=false
017.filename_regex="/^I\d+\.I\d+$/"
017.workspace=APPLICATION_PATH "/workspace/"
017.sequence_regex.seq="/(\d+)$/"
017.sequence_regex.date="//"
017.sequence_regex.time="//"
017.backup_path[]=APPLICATION_PATH "/workspace/backups/ilds/017"

018.receiver.type='relocate'
018.receiver.path='../../encrypted/golan/receiving/018'
018.filename_regex="/^SXFN_FINTL_ID\d+_\d+\.DAT$/"
018.workspace=APPLICATION_PATH "/workspace/"
018.sequence_regex.seq="/\w_(\d+)_/"
018.sequence_regex.date="/\d+_(\d{6})\d/"
018.sequence_regex.time="/(\d{4})\.DAT$/"
018.backup_path[]=APPLICATION_PATH "/workspace/backups/ilds/018"

019.receiver.type='relocate'
019.receiver.path='../../encrypted/golan/receiving/019'
019.filename_regex="/^INT_TLZ_GOL_CDR_\d+_\d+\.DAT$/"
019.workspace=APPLICATION_PATH "/workspace/"
019.sequence_regex.seq="/\w_(\d+)_/"
019.sequence_regex.date="/\d+_(\d{6})\d/"
019.sequence_regex.time="/(\d{4})\.DAT$/"
019.backup_path[]=APPLICATION_PATH "/workspace/backups/ilds/019"


new_premium.receiver.type='ftp'
new_premium.receiver.force_type=1
new_premium.receiver.force_type_to="premium"
new_premium.ftp.host='10.103.0.1'
new_premium.ftp.user='ftpuser'
new_premium.ftp.password='/wh::E1G7O.|^CwN'
new_premium.ftp.remote_directory='~/data/ilds/premium/'
new_premium.processor.type='premium'
new_premium.processor.force_type=1
new_premium.workspace=APPLICATION_PATH "/workspace/"
new_premium.filename_regex="/^PRM_(BZQ|GDL|BZN|CEL|HMO|PEL|PRT|RML|GOL|ALN|AZI|GLB|EXP|HOC|SEL|HOT)_GOL_CDR_\d+_\d+.dat$/"
new_premium.backup_path[]=APPLICATION_PATH "/workspace/backups/premium"
new_premium.receiver.move_received_files=false

premiumBzq.processor.type="premium"
premiumGdl.processor.type="premium"
premiumBzn.processor.type="premium"
premiumCel.processor.type="premium"
premiumHmo.processor.type="premium"
premiumPel.processor.type="premium"
premiumPrt.processor.type="premium"
premiumRml.processor.type="premium"
premiumGol.processor.type="premium"
premiumAln.processor.type="premium"
premiumAzi.processor.type="premium"
premiumGlb.processor.type="premium"
premiumExp.processor.type="premium"
premiumHoc.processor.type="premium"
premiumSel.processor.type="premium"
premiumHot.processor.type="premium"
;premiumCel.processor.type="premium" to add in the future for each provider

ilds.billrun.charging_day=20
ilds.receiver.receiving_path='../../encrypted/golan/receiving/ilds'
ilds.export=APPLICATION_PATH "/files/"
ilds.workspace=APPLICATION_PATH "/workspace/"
ilds.billrun.config_path=APPLICATION_PATH "/conf/ilds/billrun.ini"
; 50 NIS
ilds.threshold=50

;ilds providers
ilds.providers[]=012
ilds.providers[]=013
ilds.providers[]=014
ilds.providers[]=015
ilds.providers[]=017
ilds.providers[]=018
ilds.providers[]=019
;premium providers2
premium.providers[]=premiumBzq
premium.providers[]=premiumGdl
premium.providers[]=premiumBzn
premium.providers[]=premiumCel
premium.providers[]=premiumHmo
premium.providers[]=premiumPel
premium.providers[]=premiumPrt
premium.providers[]=premiumRml
premium.providers[]=premiumGol
premium.providers[]=premiumAln
premium.providers[]=premiumAzi
premium.providers[]=premiumGlb
premium.providers[]=premiumExp
premium.providers[]=premiumHoc
premium.providers[]=premiumSel
premium.providers[]=premiumHot

;premium.provider_ids[]=bzq
premium.provider_ids[]=gdl
premium.provider_ids[]=bzn
premium.provider_ids[]=cel
;premium.provider_ids[]=hmo
premium.provider_ids[]=pel
;premium.provider_ids[]=prt
;premium.provider_ids[]=rml
;premium.provider_ids[]=gol
;premium.provider_ids[]=aln
;premium.provider_ids[]=azi
;premium.provider_ids[]=glb
premium.provider_ids[]=exp
;premium.provider_ids[]=hoc
premium.provider_ids[]=sel
;premium.provider_ids[]=hot
;responder
response.export.path=APPLICATION_PATH "/export/"
response.workspace=APPLICATION_PATH "/workspace/"

;nrtrde
nrtrde.receiver.type="ftp"
nrtrde.ftp.host="127.0.0.1"
nrtrde.ftp.user="ftp"
nrtrde.ftp.password="golan123"
nrtrde.ftp.remote_directory="/nrtrde/"
nrtrde.workspace=APPLICATION_PATH "/workspace/nrtrde/"

nrtrde.parser.type='separator'
nrtrde.export=APPLICATION_PATH "/export/"
nrtrde.backup_path[]=APPLICATION_PATH "/workspace/backups/nrtrde/"
nrtrde..processor.zip_move_path=APPLICATION_PATH "/workspace/backups/nrtrde/zip"
nrtrde.filename_regex="/^NR\w+\d+\.\w\w\w/"
nrtrde.sequence_regex.seq="/(\d+)\.\w\w\w/"
nrtrde.sequence_regex.date="//"
nrtrde.sequence_regex.time="//"
; 30 min
nrtrde.thresholds.moc.israel=1800
; 10 min
nrtrde.thresholds.moc.nonisrael=600
; 120 min
nrtrde.thresholds.mtc=7200
; no limit 
nrtrde.thresholds.smsin=0
; 70 sms
nrtrde.thresholds.smsout=70
;the time span for the hourly thresholds
nrtrde.hourly.timespan=1 hours
;50 sms in the hour timespan
nrtrde.hourly.thresholds.smsout=50
;50 minutes in the hourly time span
nrtrde.hourly.thresholds.mocnonisrael=3000

;Rating and pricing
pricing.vat=1.18

;ggsn
ggsn.receiver.type="ftp"
ggsn.parser.type='external'
ggsn.processor.type='binaryExternal'
ggsn.processor.limit="300"
ggsn.config_path=APPLICATION_PATH "/conf/ggsn/struct.ini"
ggsn.filename_regex="/^GLT[A-Z]+_\-_/"
ggsn.sequence_regex.seq="/\w_-_(\d+)/"
ggsn.sequence_regex.date="/\d+_(\d{6})_/"
ggsn.sequence_regex.time="/_(\d{4})\+/"
ggsn.workspace=APPLICATION_PATH "/workspace/ggsn/"

ggsn.ftp.haifa.host="127.0.0.1"
ggsn.ftp.haifa.user="ftp"
ggsn.ftp.haifa.password="golan123"
ggsn.ftp.haifa.remote_directory="/ggsn/haifa/"
ggsn.ftp.petah.host="127.0.0.1"
ggsn.ftp.petah.user="ftp"
ggsn.ftp.petah.password="golan123"
ggsn.ftp.petah.remote_directory="/ggsn/petah/"

ggsn.receiver.max_missing_file_wait=3600
ggsn.backup_path[]=APPLICATION_PATH "/workspace/backups/ggsn"
ggsn.thirdparty.backup_path=APPLICATION_PATH "/workspace/nsoft/ggsn"

ggsn.fields_filter[]=imsi
ggsn.fields_filter[]=served_imsi
ggsn.fields_filter[]=ggsn_address
ggsn.fields_filter[]=charging_id
ggsn.fields_filter[]=sgsn_address
ggsn.fields_filter[]=served_pdp_address
ggsn.fields_filter[]=unified_record_time
ggsn.fields_filter[]=record_opening_time
ggsn.fields_filter[]=ms_timezone
ggsn.fields_filter[]=duration
ggsn.fields_filter[]=node_id
ggsn.fields_filter[]=served_msisdn
ggsn.fields_filter[]=served_imeisv
ggsn.fields_filter[]=diagnostics
ggsn.fields_filter[]=cause_for_record_closing
ggsn.fields_filter[]=charging_characteristics
ggsn.fields_filter[]=fbc_uplink_volume
ggsn.fields_filter[]=fbc_downlink_volume

; 40 mins
ggsn.thresholds.duration=2400
; 10 Mb in Kb
ggsn.thresholds.datalimit=10000
;the hourly timespan
ggsn.hourly.timespan=1 hours
; 150 Mb in Kb
ggsn.hourly.thresholds.datalimit=150000


nsn.parser.type="external"
nsn.processor.type="blockedBinaryExternal"
nsn.processor.orphan_files_time="1 minute"
nsn.workspace=APPLICATION_PATH "/workspace/nsn/"
nsn.config_path=APPLICATION_PATH "/conf/nsn/data_types.ini"
nsn.backup_path=APPLICATION_PATH "/workspace/backups/nsn"
nsn.thirdparty.backup_path=APPLICATION_PATH "/workspace/nsoft/nsn"
nsn.filename_regex="/^\w\w\d+\.DAT$/"
nsn.sequence_regex.seq="/\w\w(\d+).DAT/"
nsn.sequence_regex.date="//"
nsn.sequence_regex.time="//"


nsn.receiver.type="ftp"
nsn.ftp.petah.host="127.0.0.1"
nsn.ftp.petah.user="ftp"
nsn.ftp.petah.password="golan123"
nsn.ftp.petah.remote_directory="/nsn/petah/"
nsn.ftp.haifa.host="127.0.0.1"
nsn.ftp.haifa.user="ftp"
nsn.ftp.haifa.password="golan123"
nsn.ftp.haifa.remote_directory="/nsn/haifa/"

nsn.fields_filter[]=record_type
nsn.fields_filter[]=record_number
nsn.fields_filter[]=record_status
nsn.fields_filter[]=exchange_id
nsn.fields_filter[]=call_reference
nsn.fields_filter[]=global_call_reference
nsn.fields_filter[]=unified_record_time
nsn.fields_filter[]=charging_start_time
nsn.fields_filter[]=charging_end_time
nsn.fields_filter[]=call_reference_time
nsn.fields_filter[]=duration
nsn.fields_filter[]=calling_number
nsn.fields_filter[]=called_number
nsn.fields_filter[]=call_type
nsn.fields_filter[]=ticket_type
nsn.fields_filter[]=chrg_type
nsn.fields_filter[]=called_imsi
nsn.fields_filter[]=imsi
nsn.fields_filter[]=calling_imsi
nsn.fields_filter[]=in_circuit_group_name
nsn.fields_filter[]=in_circuit_group
nsn.fields_filter[]=out_circuit_group_name
nsn.fields_filter[]=out_circuit_group
nsn.fields_filter[]=tariff_class
;016 thresholds
nsn.thresholds.daily_voice=3600
nsn.thresholds.monthly_voice=36000


;deposit plugin
deposit.hourly.timespan=2 hours
deposit.hourly.thresholds.deposits=3

alert.priority[]="DEPOSITS"
alert.priority[]="GGSN_HOURLY_DATA"
alert.priority[]="NRTRDE_HOURLY_SMS"
alert.priority[]="NRTRDE_HOURLY_VOICE"
alert.priority[]="GGSN_DATA"
alert.priority[]="NRTRDE_SMS"
alert.priority[]="NRTRDE_VOICE"

fraudAlerts.alert.host="10.162.20.53"
fraudAlerts.alert.path="/dev/dev/rpc/fraud_events.rpc.php"
fraudAlerts.alert.key="eran"
fraudAlerts.alert.testKeys.ofer.imsi="425089209101076"
fraudAlerts.alert.testKeys.ofer.msisdn="546918666"
fraudAlerts.alert.testKeys.eran.imsi="425089209102700"
fraudAlerts.alert.testKeys.eran.msisdn="586801559"
fraudAlerts.alert.testKeys.eli.imsi="425089109239847"
fraudAlerts.alert.testKeys.eli.msisdn="547371030"
fraudAlerts.alert_limit=5
fraudAlerts.alert.dry_run=true

emailAlerts.dry_run=0
emailAlerts.processing.types[]='nrtrde'
emailAlerts.processing.active=0
emailAlerts.processing.thresholds.warning=35 minutes
emailAlerts.processing.thresholds.alert=1 hours
emailAlerts.alerts.recipients[] = 'eran'
;emailAlerts.alerts.recipients[] = 'euzan@golantelecom.co.il'

tap3.parser.type='external'
tap3.receiver.type="ftp"
tap3.ftp.host="127.0.0.1"
tap3.ftp.user="ftp"
tap3.ftp.password="golan123"
tap3.ftp.remote_directory="/tap3/"
tap3.processor.type='binaryExternal'
tap3.config_path=APPLICATION_PATH "/conf/tap3/struct.ini"
tap3.workspace=APPLICATION_PATH "/workspace/tap3/"
tap3.backup_path=APPLICATION_PATH "/workspace/backups/tap3"
tap3.sequence_regex.seq="/(\d+)$/"
tap3.sequence_regex.date="//"
tap3.sequence_regex.time="//"
tap3.filename_regex="/^\w+ISRGT\d+$/"
tap3.thirdparty.backup_path=APPLICATION_PATH "/workspace/nsoft/tap3"

smsc.receiver.type="ftp"
smsc.ftp.host="127.0.0.1"
smsc.ftp.user="ftp"
smsc.ftp.password="golan123"
smsc.ftp.remote_directory="/smsc/"
smsc.parser.type='Fixed'
smsc.processor.type='configurableFixedFields'
smsc.thirdparty.backup_path=APPLICATION_PATH "/workspace/nsoft/smsc"
smsc.config_path=APPLICATION_PATH "/conf/smsc/struct.ini"
smsc.sequence_regex.seq="/\d+_(\d+)/"
smsc.sequence_regex.date="/^(\d{6})/"
smsc.sequence_regex.time="/^\d{6}(\d{6})/"
smsc.filename_regex="/^\d+_\d+\w+\.cdr/"
smsc.workspace=APPLICATION_PATH "/workspace/smsc/"

smpp.receiver.type="ftp"
smpp.ftp.host="127.0.0.1"
smpp.ftp.user="ftp"
smpp.ftp.password="golan123"
smpp.ftp.remote_directory="/smpp/"
smpp.parser.type='Fixed'
smpp.processor.type='configurableFixedFields'
smpp.thirdparty.backup_path=APPLICATION_PATH "/workspace/nsoft/smpp"
smpp.config_path=APPLICATION_PATH "/conf/smsc/struct.ini"
smpp.sequence_regex.seq="/\d+_(\d+)/"
smpp.sequence_regex.date="/^(\d{6})/"
smpp.sequence_regex.time="/^\d{6}(\d{6})/"
smpp.filename_regex="/^\d+_\d+\w+\.cdr/"
smpp.workspace=APPLICATION_PATH "/workspace/smpp/"

mmsc.receiver.type="ftp"
mmsc.ftp.petah.host="127.0.0.1"
mmsc.ftp.petah.user="ftp"
mmsc.ftp.petah.password="golan123"
mmsc.ftp.petah.remote_directory="/mmsc/"
mmsc.thirdparty.backup_path=APPLICATION_PATH "/workspace/nsoft/mmsc"
mmsc.sequence_regex.seq="/^(\d+)_/"
mmsc.sequence_regex.date="/^\d+_(\d{6})/"
mmsc.sequence_regex.time="/^\d+_\d{6}(\d{6})/"
mmsc.filename_regex="/^\d+_\d+\.cdr/"
mmsc.workspace=APPLICATION_PATH "/workspace/mmsc/"

wholesale.reports.path=APPLICATION_PATH "/reports/wholesale"
national_roaming.reports.path=APPLICATION_PATH "/reports/national_roaming"

provider.rpc.server[]="172.29.202.115"
;provider.rpc.server[]="172.29.202.20"
;provider.rpc.server[]="10.162.20.70"
;"gtgt.no-ip.org"
;provider.rpc.url="gt-dev/dev/rpc/subscribers_by_date.rpc.php"
provider.rpc.url="gt-dev/dev/admin/subscriber_plan_by_date.rpc.php"
;provider.rpc.bulk_url="gt-dev/dev/rpc/subscriber_plan_by_date_json.rpc.php"
provider.rpc.bulk_url="gt-dev/dev/rpc/getSubscriberDetails.rpc.php"
crm.url="gt-dev/dev/rpc/billable_subscribers.rpc.php"
;crm.url="gt-dev-master/dev/rpc/billable_subscribers.rpc.php"

queue.calculators[] = "rate"
queue.calculators[] = "customer"
queue.calculators[] = "pricing"

subscriber.type=golan
subscriber.availableFields[aid]="account_id"
subscriber.availableFields[sid]="subscriber_id"
subscriber.availableFields[plan]="plan"
subscriber.extra_data[daily_ird_plan]="daily_ird_plan"
subscriber.extra_data[last_vlr]="last_vlr"
;subscriber.availableFields[next_plan]="next_plan"
;subscriber.availableFields[credits]="credits"
;subscriber.availableFields[]="imsi"

ilds.generator.invoice_id_pattern=[[param1_date]][[param2_id]][[param3_seq]]
ilds.generator.invoice_id_params.0.param='param1_date'
ilds.generator.invoice_id_params.0.type='date'
ilds.generator.invoice_id_params.0.format='Y'
ilds.generator.invoice_id_params.0.value='cycle'
ilds.generator.invoice_id_params.1.param='param2_id'
ilds.generator.invoice_id_params.1.type='identifier'
ilds.generator.invoice_id_params.1.length=4
ilds.generator.invoice_id_params.1.value='by_type'
ilds.generator.invoice_id_params.2.param='param3_seq'
ilds.generator.invoice_id_params.2.type='autoinc'
ilds.generator.invoice_id_params.2.min_value=1
ilds.generator.invoice_id_params.2.max_value=999999999
ilds.generator.invoice_id_params.2.length=9
ilds.generator.invoice_id_params.2.value='now'
