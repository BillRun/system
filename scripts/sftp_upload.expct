#!/usr/bin/expect

set local_path [lindex $argv 0]
set filename [lindex $argv 1]
set pwd [lindex $argv 2]
set base_dir [lindex $argv 3]
spawn sftp billrun@172.29.20.30
expect "password:"
send "$pwd\n"
expect "sftp>"
send "ls $local_path $base_dir\n"
expect "sftp>"
send "put $local_path $base_dir/\n"
expect "sftp>"
send "chgrp 1001 $base_dir/$filename\n"
expect "sftp>"
send "chmod 664 $base_dir/$filename\n"
expect "sftp>"
